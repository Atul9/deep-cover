#!/usr/bin/env ruby

require "bundler/setup"

require "deep_cover"
require_relative "../spec/tools"

def show_builtin(fn)
  puts format(fn, builtin_coverage(fn))
end

def show_bc(fn)
  puts format(fn, our_coverage(fn))
end

example = ARGV[0] || 'simple_if'
fn = "./spec/samples/#{example}.rb"
puts "Builtin:\n"
show_builtin(fn)
puts "\nPure Ruby:\n"
cover = show_bc(fn)
puts "\nGenerated code:\n"
puts DeepCover.buffer(fn).covered_source
puts "\nParsed code:\n"
puts DeepCover.buffer(fn).ast
